---
title: "Импорт блога из Blogger в Hugo"
date: 2019-01-22
draft: false
Tags: ['hugo']
---

У меня уже давно было намерение перенести свой самый старый бложик, который я вёл на blogger, в hugo. Первый пост там был ещё в 2007 году, и с тех пор там накопилось ~450 постов. Хоть там и нет ничего особо интересного, просто заметки для себя, однако хотелось всё это сохранить. Для этого я собирался написать скриптик, скачивающий странички, парсящий их и сохраняющий в Markdown. Но всё оказалось проще. 

Первым делом, в настройках у blogger есть кнопка для импорта/экспорта блога. Экспорт сохраняет весь блог с оформлением и постами в xml-файл. Так что нет нужды выкачивать всё это самому. 

Далее, прежде чем писать свой парсер, я решил поискать готовое решение. Оказалось, есть уже готовый скрипт [blogger-to-hugo](https://pypi.org/project/blogger-to-hugo/) на python, который я немедля установил. С ходу он у меня не заработал. Я не очень хорошо знаком с экосистемой python, и не знаю, почему в установленном пакете не оказалось самого скрипта. Так что я пошёл в [репозитарий с исходниками](https://bitbucket.org/petraszd/blogger-to-hugo), и скачал скрипт оттуда. 

Скрипт оказался довольно таки кривой. Видимо автор писал его из расчёта на идеальный блог, в котором у каждого поста есть заголовок, нет пустых постов, нет постов с потерявшимися со временем картинками, нет постов, в которых есть одна и та же картинка, и т.д. На любую нестандартную ситуацию скрипт реагирует завершением с ошибкой, не пытаясь вытащить всё, что можно. Пришлось его немного допилить, исправляя возникавшие ошибки. 

Тем не менее, в итоге скрипт отработал, сконвертировал все посты, выкачал все картинки и сложил их в отдельную папку, которую осталось только перенести в hugo.

Из интересного - для конвертации html в markdown скрипт использует [pandoc](https://pandoc.org/). Я не знал про эту штуку, а она, похоже, полезная. Она умеет конвертировать html, к примеру, в LaTeX, и с ней можно легко сделать генератор pdf-журналов. 