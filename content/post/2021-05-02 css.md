---
title: "Моя методология стилей"
date: 2021-05-02
draft: false
tags: ['css', 'frontend']
---

Не знаю почему, для меня это загадка, но в мире существует проблема структурирования CSS. Как организовать стили в большом проекте таким образом, чтобы они были удобными и при изменении на одной странице не портили вёрстку на всех остальных. Для этого даже придумывают разные технологии и методологии. Технологии - типа [css-loader](https://webpack.js.org/loaders/css-loader/), который заменяет имена классов на случайные, чтобы гарантировать локальное использование. Методологии - типа [БЭМ](https://ru.bem.info/methodology/css/) и его вариантов, о том как называть классы по единой системе, чтобы их названия никогда не пересекались. Не удивлюсь, если где-то существуют проекты, где оба подхода применяются одновременно, хотя это уже совсем клиника. 

Минусы этих подходов известны: БЭМ усложняет написание и чтение кода. Имена классов становятся длинными и пестрят двойными подчёркиваниями. А обфускация имён затрудняет отладку: найти место в коде, где объявлен класс, закодированный как `bNg8RB`, становится нетривиальной задачей. 

У меня сложилась своя методика, как писать стили и не сталкиваться с проблемой колизий. При этом она проста и оставляет код читабельным. Суть её в том, что **cтили первого уровня являются дефицитным ресурсом, который надо расходовать максимально экономно. Чем меньше стилей первого уровня в проекте, тем проще жить.**

Cтили первого уровня работают глобально, и их нельзя тратить на всякую мелочь. Ещё можно позволить себе немножко нормализовать встроенные стили и настроить типографику - это и так должно быть везде, потому не страшно. А дальше на первом уровне объявляются только крупные части, не элементы, а компоненты. Или, по терминологии БЭМ - блоки. 

У каждого компонента есть внешний `div` с классом, совпадающим с именем этого компонента. Только такие классы имеют право на первый уровень стилей. Да и то, не для каждого компонента: если, к примеру, компонент сложный, разбит на подкомпоненты, и эти подкомпоненты не используются больше нигде, а только в этом компоненте, то им первый уровень не положен. 

Далее, все стили для компонента и его частей делаются вложенными и действуют только внутри элемента с главным классом. Их имена могут быть любыми, например, у меня вложенных элементов часто встречаются классы `.caption` и `.item`, и так же часто встречаются модификаторы типа `.active`. Они рассыпаны по всему проекту, используются во многих компонентах, но благодаря тому, что они объявлены не на первом уровне, а только на втором, третьем и далее, они никогда не пересекаются друг с другом. Уследить за тем, чтобы не было колизий внутри одного компонента гораздо проще, чем во всём коде проекта. Это редко возникающая и тривиально исправляемая проблема, и городить длинные имена с двойными подчёркиваниями для её предотвращения - чрезмерно. Также, нет проблемы с пересечением имён компонентов - даже если в проекте их будет, скажем, сто или двести, они всё равно скорее всего все будут отражать назначение компонента, а потому будут разными, потому нет никакой нужды их шифровать. 

Итого. Первый уровень стилей подобен глобальному пространству имён. Его нужно держать в чистоте, иначе получится лапша. 